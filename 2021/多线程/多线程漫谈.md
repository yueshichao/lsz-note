# 多进程的起源
没错，虽然标题叫**多线程漫谈**，但我们从进程说起  
多进程的出现是为了充分利用CPU，书面一点，叫做**提升CPU吞吐率**  
原本计算机只能单任务，一个接一个的做  
但是实现多进程就多个任务交替执行  

- 多进程一定能提升任务执行效率吗(CPU任务吞吐率)？  
答案视情况而定，甚至可能降低任务执行效率  

- 什么情况下会提升任务提供效率？  
CPU很快，但并不是计算机很快，计算机运算，需要**输入，运算，输出**，其中输入，输出都是IO操作，无论是磁盘IO还是网络IO，都很慢(对于CPU运算而言)  
数据从**磁盘 -> 内存 -> 高速缓存 -> 寄存器**，如果A任务**CPU运算只要1s**，但**IO操作需要10s**，这时候CPU如果**忙等**就没有意义  
于是就把IO操作交给**DMA**去等待，自己执行其他进程去了  

> 举个例子，把CPU比作一个服务员，每个任务进程比作顾客，假设这些顾客脑子不太灵光，每次说自己需求都要先想一段时间  
> 之前只要顾客想要点菜，服务员就直接去了，现在不这样了，顾客想好了（甚至写好了），才会叫服务员去做事  

## 多进程切换的代价
之前提到IO操作，进程A发生阻塞，这时进程B执行，那么进程A结束阻塞，如何回来继续执行呢？  
其实是**保存上下文**，所谓的上下文，就是你进程中断的这一刻，寄存器、程序计数器等指令顺序执行所需的数据，等进程切换回来时，就**恢复现场(上下文)**  
而这个操作是**有代价的**  
想象一下，自己有很多事情要做时，频繁切换执行的任务是不是也挺累人的，毕竟要记住自己的工作进度  


## 就绪、运行、阻塞



# 多线程
## CAS操作
## 

